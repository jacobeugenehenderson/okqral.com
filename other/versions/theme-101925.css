/* =========================
   TOKENS
========================= */
:root{
  /* Core palette */
  --bg-from:#050505; --bg-to:#0C0C0F;
  --text:#EAEAEA; --muted:#a1a1aa;

  /* Neon accents */
  --accent-fuchsia:#8B5CF6; --accent-cyan:#14B8A6;

  /* Glass / depth */
  --card-bg:rgba(255,255,255,.06);
  --card-border:rgba(255,255,255,.12);
  --card-blur:6px;
  --card-shadow:0 0 40px -10px var(--accent-fuchsia);

  /* Grid / chrome */
  --grid-size:40px; --grid-opacity:.1;

  /* Controls */
  --focus-ring:rgba(56,189,248,.7);
  --radius-xl:1.25rem;

  /* Preview arrows */
  --arrow-offset:60px; --arrow-size:40px; --arrow-glow:0 0 10px var(--accent-fuchsia);
}

/* =========================
   GLOBAL SCAFFOLD
========================= */
body{ background:linear-gradient(135deg,var(--bg-from),var(--bg-to)); color:var(--text); }
.theme-grid{ position:relative; }
.theme-grid::before{
  content:""; position:fixed; inset:0; pointer-events:none; opacity:var(--grid-opacity);
  background:
    linear-gradient(to right, var(--accent-fuchsia) 1px, transparent 1px),
    linear-gradient(to bottom, var(--accent-fuchsia) 1px, transparent 1px);
  background-size:var(--grid-size) var(--grid-size), var(--grid-size) var(--grid-size);
  z-index:0;
}
.theme-grid>*{ position:relative; z-index:1; }

/* Make room for fixed footer */
main{ padding-bottom:4.5rem; }

/* =========================
   CARDS / SURFACES
========================= */
.card{
  background:var(--card-bg);
  border:1px solid var(--card-border);
  backdrop-filter:blur(var(--card-blur));
  border-radius:var(--radius-xl);
  box-shadow:var(--card-shadow);
}
.step-card{ overflow:hidden; } /* remove square border artifact on rounded cards */

/* Open card highlight */
#stepper>div{ transition:background-color .15s,border-color .15s; }
#stepper .step-header{ transition:background-color .15s,border-color .15s,color .15s; }
#stepper>div.is-open>.step-header{
  background:rgba(139,92,246,.12);
  border-color:rgba(139,92,246,.35);
}
#stepper>div.is-open{
  background:rgba(139,92,246,.06);
  border-color:rgba(139,92,246,.18);
}

/* =========================
   CONTROLS (inputs/selects/Menu)
========================= */
input[type="text"],input[type="email"],input[type="url"],input[type="number"],
input[type="search"],input[type="password"],input[type="color"],textarea,select{
  background:#fff; color:#171717; border-color:#d4d4d4;
  transition:background-color .15s,border-color .15s,color .15s;
}
input::placeholder,textarea::placeholder{ color:#737373; }

/* Dark */
.dark input[type="text"],.dark input[type="email"],.dark input[type="url"],
.dark input[type="number"],.dark input[type="search"],.dark input[type="password"],
.dark input[type="color"],.dark textarea,.dark select{
  background:rgb(14,10,18); color:rgb(240,240,245); border-color:rgb(80,60,110);
}
.dark input::placeholder,.dark textarea::placeholder{ color:rgb(120,120,125); }

/* Focus */
input:focus,textarea:focus,select:focus{
  outline:none; border-color:rgb(59,130,246); box-shadow:0 0 0 2px rgba(59,130,246,.2);
}
.dark input:focus,.dark textarea:focus,.dark select:focus{
  border-color:rgb(147,197,253); box-shadow:0 0 0 2px rgba(147,197,253,.2); background:rgb(30,30,33);
}

/* Muted/disabled helper */
.field-muted,.field-muted *{ opacity:.55; pointer-events:none; }

/* Unified top-bar controls (selects + Menu) */
.control, #appMenuBtn, #qrType, #ecc, select.rounded-md, .topctl{
  display:inline-flex; align-items:center; gap:.375rem;
  padding:.5rem .875rem; font-size:.875rem; line-height:1.25rem;
  border-radius:.875rem;
  background:rgb(10 10 14);
  border:1px solid rgb(96 82 175 / 60%);
  box-shadow:
    0 0 0 1px rgb(154 119 255 / 18%) inset,
    0 0 24px rgb(136 102 255 / 12%);
  color:#fff; cursor:pointer;
}
.control:hover, #appMenuBtn:hover, select.rounded-md:hover, .topctl:hover{
  box-shadow:
    0 0 0 1px rgb(154 119 255 / 28%) inset,
    0 0 28px rgb(136 102 255 / 16%);
}
/* remove native arrow so our chevron matches */
select.rounded-md, select.topctl{ -webkit-appearance:none; appearance:none; padding-right:2rem; }
button.topctl{ padding-right:2rem; }

/* Shared chevron for top controls */
.topctl--chev::after{
  content:""; pointer-events:none; position:absolute; right:.6rem; top:50%;
  width:.75rem; height:.75rem; transform:translateY(-50%); opacity:.85;
  background-repeat:no-repeat; background-position:center; background-size:100% 100%;
  background-image:url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='white'>\
<path d='M5.23 7.21a.75.75 0 011.06.02L10 10.17l3.71-2.94a.75.75 0 111.04 1.08l-4.23 3.35a.75.75 0 01-.96 0L5.21 8.31a.75.75 0 01.02-1.1z'/>\
</svg>");
}
:root.dark .topctl{ --ui-bg:#0f0e13; --ui-border:#6d5bc4; --ui-fg:#fff; }

/* =========================
   PREVIEW LAYOUT
========================= */

/* Portrait stage wrapper (outer container) */
.preview-stage{
  position: relative;
  width: 100%;
  max-width: 400px;
  aspect-ratio: 2 / 3;
  margin-inline: auto;
  border-radius: var(--radius-xl);
  display: grid;
  place-items: center;
  overflow: visible;
}

/* Main preview wrapper (card) */
#qrPreview{
  position: relative;
  display: grid;               /* centers QR mount */
  place-items: center;
  box-sizing: border-box;
  width: 100%;
  aspect-ratio: 10 / 16;
  margin: 0;
  border: none;
  background: transparent;
  border-radius: var(--radius-xl);
  overflow: visible;
  filter: drop-shadow(0 12px 32px rgba(0,0,0,.35));
}

/* QR mount = container for the SVG */
#qrMount{
  width: auto;
  height: 100%;
  max-height: 100%;
  border-radius: inherit;
  display: block;
  place-items: center;
}
#qrMount > svg{
  display: block;
  width: 100%;
  height: auto;
  border-radius: inherit;
}

/* =========================
   ARROWS
========================= */
.nav-arrow{
  position: relative;
  display: grid;
  place-items: center;
  width: 44px;
  height: 44px;
  border-radius: 9999px;
  background: rgba(14,14,20,.92);
  border: 1px solid rgba(160,140,255,.35);
  box-shadow:
    0 0 0 1px rgba(160,140,255,.25) inset,
    0 6px 18px rgba(0,0,0,.45),
    0 0 22px rgba(136,102,255,.22);
  color: #e8e6ff;
  z-index: 20;
  outline: none;
}
.nav-arrow:hover{
  box-shadow:
    0 0 0 1px rgba(160,140,255,.35) inset,
    0 6px 22px rgba(0,0,0,.5),
    0 0 30px rgba(136,102,255,.32);
}

/* Triangle glyphs */
.nav-arrow::before{ content: ""; }
#prevSubtype::after,
#nextSubtype::after{
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  width: 0;
  height: 0;
  transform: translate(-50%, -50%);
}
#prevSubtype::after{
  border-top: 6px solid transparent;
  border-bottom: 6px solid transparent;
  border-right: 10px solid currentColor;
}
#nextSubtype::after{
  border-top: 6px solid transparent;
  border-bottom: 6px solid transparent;
  border-left: 10px solid currentColor;
}
#prevSubtype{ transform: translate(-150%, -50%); }
#nextSubtype{ transform: translate(150%, -50%); }

/* =========================
   FOOTER
========================= */
.app-footer{
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 20;
  padding: .75rem 0 1rem;
  background: color-mix(in oklab, canvas 95%, transparent);
  -webkit-backdrop-filter: blur(2px);
  backdrop-filter: blur(2px);
  border-top: 1px solid rgb(38 38 38 / .8);
  color: #a3a3a3;
}
.app-footer__rule{
  height: 1px;
  width: min(720px, 92%);
  margin: 0 auto .5rem;
  border-radius: 999px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(170,120,255,.15) 15%,
    rgba(170,120,255,.55) 50%,
    rgba(170,120,255,.15) 85%,
    transparent 100%
  );
  box-shadow:
    0 0 .5px rgba(170,120,255,.6),
    0 0 10px rgba(170,120,255,.25);
}
.app-footer__text{
  text-align: center;
  font-size: .8125rem;
  color: rgba(229,231,235,.8);
}